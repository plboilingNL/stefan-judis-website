<!doctype html>
<html class="" lang="en">
<head>
  {{> head title=data.fields.title description=data.fields.description fingerprint=fingerprint }}
  <meta http-equiv="origin-trial" data-feature="Web Share" data-expires="2016-12-26" content="Aie5EaMkJcu+NkbkIFk1NWsQtCyp7f3CGwWAt4VXcLYlzRTxdrZrvLwONbWU3ruJ5cuu2YgduSpdqzWDuvFLJAMAAABZeyJvcmlnaW4iOiAiaHR0cHM6Ly93d3cuc3RlZmFuanVkaXMuZGU6NDQzIiwgImZlYXR1cmUiOiAiV2ViU2hhcmUiLCAiZXhwaXJ5IjogMTQ4Mjc2MjY5OH0=">
  <meta name="theme-color" content="#3a99d8">
</head>

<body class="writing {{ slug }}">
  {{> navigation }}

  <main>
    <section class="o-section o-section--yellow o-section--small">
      <div class="o-container">
        <date class="o-date u-marginBottom">{{#date data.fields.date}}{{/date}}</date>
        <h1 class="o-section__smallHeadline">{{ data.fields.title }}</h1>
        {{#if data.fields.body}}
          <div class="o-section__content">{{#marked data.fields.body }}{{/marked}}</div>
        {{/if}}

        <p class="u-marginTopLarge">
          {{#twitter-share data.fields _fileName }}{{/twitter-share}}
        </p>
      </div>
    </section>
    {{#if data.fields.comments}}
    <section class="o-section o-section--yellow o-section--small">
      <div class="o-container">
        <h3 class="o-section__smallHeadline">Any comments?</h3>
        <div id="disqus_thread"></div>
      </div>
    </section>
    {{/if}}
    <footer class="o-section o-section--blue o-section--small">
      <div class="o-container">
        {{> author author=data.fields.author.[0] }}
      </div>
    </footer>
  </main>
  {{#if data.fields.comments}}
    {{> discuss}}
  {{/if}}

  {{> tracking}}

  <script>
    if (navigator.share !== undefined) {
      var SHARE_BTN = document.querySelector('.shareBtn');

      SHARE_BTN.innerHTML = `
<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
</svg>
Share`;

      SHARE_BTN.addEventListener('click', function (ev) {

        navigator.share({
          title: document.title,
          url: window.location.href
        }).then(() => console.log('Successful share'))
        .catch((error) => console.log('Error sharing:', error));

        ev.preventDefault();
      });
    }
  </script>
</body>
</html>
